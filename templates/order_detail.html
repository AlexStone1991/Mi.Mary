{% extends "base.html" %}
{% load static %}
 
{% block content %}
<div class="container mt-5 mb-5">
<div class="row justify-content-center">
<div class="col-lg-8">
 
            <div class="d-flex justify-content-between align-items-center mb-4">
<h2 class="mb-0">Детали заказа #{{ order.id }}</h2>
<a href="{% url 'orders' %}" class="btn btn-outline-secondary">
<i class="bi bi-arrow-left"></i> Назад к списку
</a>
</div>
 
            <div class="card shadow-sm">
<div class="card-header bg-light py-3">
<h5 class="mb-0">Основная информация</h5>
</div>
<div class="card-body">
<div class="row">
<div class="col-md-6">
<p><strong>Клиент:</strong> {{ order.client_name }}</p>
<p class="mb-0"><strong>Телефон:</strong> {{ order.phone }}</p>
</div>
<div class="col-md-6">
<p><strong>Дата записи:</strong> {{ order.appointment_date|date:"d.m.Y H:i" }}</p>
<p class="mb-0"><strong>Статус:</strong>
<span class="badge bg-{{ order.status_color|default:'primary' }}">
                                    {{ order.get_status_display }}
</span>
</p>
</div>
</div>
</div>
</div>
 
            <div class="card shadow-sm mt-4">
<div class="card-header bg-light py-3">
<h5 class="mb-0">Выбранные услуги</h5>
</div>
<div class="card-body p-0">
<ul class="list-group list-group-flush">
                        {% for service in order.services.all %}
<li class="list-group-item d-flex justify-content-between align-items-center">
<div>
<h6 class="mb-1">{{ service.name }}</h6>
<small class="text-muted">{{ service.category.name }}</small>
</div>
<span class="fw-bold">{{ service.price }} ₽</span>
</li>
                        {% endfor %}
<li class="list-group-item d-flex justify-content-between align-items-center bg-light">
                            {% with total_services=order.services.all|length %}
<span class="fw-bold">Итого: {{ total_services }} {% if total_services == 1 %}услуга{% elif total_services > 1 and total_services < 5 %}услуги{% else %}услуг{% endif %}</span>
<strong style="font-size: 1.1rem;">{{ order.total_price|default:0 }} ₽</strong>
                            {% endwith %}
</li>
</ul>
</div>
</div>
 
            {% if order.comment %}
<div class="card shadow-sm mt-4">
<div class="card-header bg-light py-3">
<h5 class="mb-0">Комментарий клиента</h5>
</div>
<div class="card-body">
<p class="text-danger mb-0 fst-italic">"{{ order.comment }}"</p>
</div>
</div>
            {% endif %}
 
        </div>
</div>
</div>
 
{% endblock %}